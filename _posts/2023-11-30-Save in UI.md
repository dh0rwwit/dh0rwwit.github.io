---
title: 2. Structure of Save in UI using CommonModule
author: dh0rwwit
date: 2023-11-30 09:00:00 +2300
categories: [Language/Framework,C#]
tags: [.NET, C#, WCF, Winform(Infragistics)]
render_with_liquid: false
---

<div class="colorscripter-code" style="color:#73E1F7;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#000000;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #4f4f4f"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#aaa;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div><div style="line-height:130%">25</div><div style="line-height:130%">26</div><div style="line-height:130%">27</div><div style="line-height:130%">28</div><div style="line-height:130%">29</div><div style="line-height:130%">30</div><div style="line-height:130%">31</div><div style="line-height:130%">32</div><div style="line-height:130%">33</div><div style="line-height:130%">34</div><div style="line-height:130%">35</div><div style="line-height:130%">36</div><div style="line-height:130%">37</div><div style="line-height:130%">38</div><div style="line-height:130%">39</div><div style="line-height:130%">40</div><div style="line-height:130%">41</div><div style="line-height:130%">42</div><div style="line-height:130%">43</div><div style="line-height:130%">44</div><div style="line-height:130%">45</div><div style="line-height:130%">46</div><div style="line-height:130%">47</div><div style="line-height:130%">48</div><div style="line-height:130%">49</div><div style="line-height:130%">50</div><div style="line-height:130%">51</div><div style="line-height:130%">52</div><div style="line-height:130%">53</div><div style="line-height:130%">54</div><div style="line-height:130%">55</div><div style="line-height:130%">56</div><div style="line-height:130%">57</div><div style="line-height:130%">58</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#73E1F7;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#FEF705">Dictionary</span><span style="color:#FE05F2">&lt;</span><span style="color:#FE05F2">string</span>,&nbsp;RequestData<span style="color:#FEF705"></span><span style="color:#FE05F2">&gt;</span>&nbsp;Parameters&nbsp;<span style="color:#FEF705"></span><span style="color:#FE05F2">=</span>&nbsp;<span style="color:#FE05F2">new</span>&nbsp;<span style="color:#FEF705">Dictionary</span><span style="color:#FE05F2">&lt;</span><span style="color:#FE05F2">string</span>,&nbsp;RequestData<span style="color:#FEF705"></span><span style="color:#FE05F2">&gt;</span>();&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#FE05F2">using</span>&nbsp;(RequestData&nbsp;argsAppH&nbsp;<span style="color:#FEF705"></span><span style="color:#FE05F2">=</span>&nbsp;<span style="color:#FE05F2">new</span>&nbsp;RequestData())</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#FE05F2">using</span>&nbsp;(RequestData&nbsp;args&nbsp;<span style="color:#FEF705"></span><span style="color:#FE05F2">=</span>&nbsp;<span style="color:#FE05F2">new</span>&nbsp;RequestData())</div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#FE05F2">using</span>&nbsp;(RequestData&nbsp;args&nbsp;<span style="color:#FEF705"></span><span style="color:#FE05F2">=</span>&nbsp;<span style="color:#FE05F2">new</span>&nbsp;RequestData())&nbsp;<span style="color:#05F508">//&nbsp;...</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;args.Add(</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prms&nbsp;<span style="color:#FEF705"></span><span style="color:#FE05F2">=</span><span style="color:#FEF705"></span><span style="color:#FE05F2">&gt;</span>&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prms.Set(<span style="color:#FA1216">"@i_strComboValue"</span>,&nbsp;<span style="color:#FE05F2">this</span>.uComboValue.Value.ToString());</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prms.Set(<span style="color:#FA1216">"@i_strForm"</span>,&nbsp;<span style="color:#FE05F2">this</span>.Name);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FE05F2">if</span>&nbsp;(&nbsp;<span style="color:#FE05F2">this</span>.uComboOccurTypeCode.Value.ToString()&nbsp;<span style="color:#FEF705"></span><span style="color:#FE05F2">=</span><span style="color:#FEF705"></span><span style="color:#FE05F2">=</span><span style="color:#FA1216">"I"</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prms.Set(<span style="color:#FA1216">"@i_strMaterialCode"</span>,&nbsp;<span style="color:#FE05F2">this</span>.uTextMaterialCode.Text);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FE05F2">else</span>&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prms.Set(<span style="color:#FA1216">"@i_strProductCode"</span>,&nbsp;<span style="color:#FE05F2">this</span>.uTextMaterialCode.Text);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prms.Set(<span style="color:#FA1216">"@o_strResultCode"</span>,&nbsp;<span style="color:#FA1216">""</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;Parameters.Add(<span style="color:#FA1216">"up_Update_TableName"</span>,args)&nbsp;<span style="color:#05F508">//&nbsp;웹&nbsp;서비스,svc디버깅할&nbsp;필요없이&nbsp;UI에서&nbsp;프로시저&nbsp;확인&nbsp;가능.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#05F508">//&nbsp;이미지가&nbsp;있을&nbsp;경우는&nbsp;생략</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#05F508">//&nbsp;DataTable형식의&nbsp;자료&nbsp;arg에&nbsp;저장</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FE05F2">for</span>&nbsp;(<span style="color:#FE05F2">int</span>&nbsp;t&nbsp;<span style="color:#FEF705"></span><span style="color:#FE05F2">=</span>&nbsp;<span style="color:#FEFEFE">0</span>;&nbsp;t&nbsp;<span style="color:#FEF705"></span><span style="color:#FE05F2">&lt;</span>&nbsp;<span style="color:#FE05F2">this</span>.uGridTeam.Rows.Count;&nbsp;t<span style="color:#FEF705"></span><span style="color:#FE05F2">+</span><span style="color:#FEF705"></span><span style="color:#FE05F2">+</span>)&nbsp;<span style="color:#05F508">//&nbsp;foreach써도&nbsp;무방</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#05F508">//&nbsp;담당자가&nbsp;있을경우에만&nbsp;저장함.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FE05F2">if</span>&nbsp;(<span style="color:#FE05F2">this</span>.uGridTeam.Rows[t].Cells[<span style="color:#FA1216">"UserID"</span>].Value.ToString().Length&nbsp;<span style="color:#FEF705"></span><span style="color:#FE05F2">&gt;</span>&nbsp;<span style="color:#FEFEFE">0</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argsTeam.Add(prms&nbsp;<span style="color:#FEF705"></span><span style="color:#FE05F2">=</span><span style="color:#FEF705"></span><span style="color:#FE05F2">&gt;</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prms.Set(<span style="color:#FA1216">"@i_ManageCode"</span>,&nbsp;<span style="color:#FA1216">"Output:strManageCode"</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prms.Set(<span style="color:#FA1216">"@i_TeamRole"</span>,&nbsp;<span style="color:#FE05F2">this</span>.uGridTeam.Rows[t].Cells[<span style="color:#FA1216">"TeamRole"</span>].Value);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prms.Set(<span style="color:#FA1216">"@i_DeptCode"</span>,&nbsp;<span style="color:#FE05F2">this</span>.uGridTeam.Rows[t].Cells[<span style="color:#FA1216">"DeptCode"</span>].Value);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prms.Set(<span style="color:#FA1216">"@i_ManName"</span>,&nbsp;<span style="color:#FE05F2">this</span>.uGridTeam.Rows[t].Cells[<span style="color:#FA1216">"UserName"</span>].Value);&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prms.Set(<span style="color:#FA1216">"@i_UserIP"</span>,&nbsp;strUserIP);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prms.Set(<span style="color:#FA1216">"@i_UserID"</span>,&nbsp;strUserName);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FE05F2">if</span>&nbsp;(argsTeam.Count&nbsp;<span style="color:#FEF705"></span><span style="color:#FE05F2">&gt;</span>&nbsp;<span style="color:#FEFEFE">0</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Parameters.Add(<span style="color:#FA1216">"up_Update_TeamTableName"</span>,&nbsp;argsTeam);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#05F508">//&nbsp;이&nbsp;외의&nbsp;arg추가사항&nbsp;생략&nbsp;원본&nbsp;문서&nbsp;참고</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;RequestData<span style="color:#FEF705"></span><span style="color:#FE05F2">&lt;</span><span style="color:#FE05F2">int</span><span style="color:#FE05F2">&gt;</span>&nbsp;r&nbsp;<span style="color:#FEF705"></span><span style="color:#FE05F2">=</span>&nbsp;CommonCSharpModule.Save_CommonClass(Parameters);&nbsp;<span style="color:#05F508">//&nbsp;저장&nbsp;결과는&nbsp;1&nbsp;또는&nbsp;0</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#05F508">//&nbsp;팝업창&nbsp;닫기&nbsp;생략&nbsp;cls...~</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FE05F2">if</span>(r.IsSuccess)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#05F508">//&nbsp;성공메세지&nbsp;출력</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#05F508">//&nbsp;저장&nbsp;후&nbsp;갱신&nbsp;된&nbsp;그리드&nbsp;상태&nbsp;출력</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FE05F2">else</span>&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#05F508">//&nbsp;실패메세지&nbsp;출력</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#FE05F2">throw</span>&nbsp;r.<span style="color:#FEF705">Exception</span>;&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a  target="_blank" style="color:#4f4f4ftext-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#4f4f4f;color:white;border-radius:10px;padding:1px"></span></a></td></tr></table></div>

